# 利率模型公式與變數說明

本文件整理了債券模擬系統中使用的四種利率模型的隨機微分方程 (SDE) 及其變數定義。

---

### 1. Vasicek 模型

此模型用於模擬**債券風險利率 (drf)**，其特點是利率會朝一個長期平均值回歸。

- **公式:**
  ```
  dr_t = k(θ - r_t)dt + σdW_t
  ```

- **變數說明:**
  - `r_t`: 時間 t 的瞬時利率。
  - `k` (kappa): 均值回歸速度，代表利率回復到長期均值的速度。
  - `θ` (theta): 長期平均利率或均衡水平。
  - `σ` (sigma): 波動率，代表利率隨機波動的幅度。
  - `dW_t`: 維納過程或布朗運動，代表隨機衝擊。

---

### 2. Cox-Ingersoll-Ross (CIR) 模型

此模型用於模擬 **dr_cir**，是 Vasicek 模型的延伸，透過引入 `√r_t` 項來確保利率恆為正值（在 `2kθ > σ²` 的條件下）。

- **公式:**
  ```
  dr_t = k(θ - r_t)dt + σ√r_t dW_t
  ```

- **變數說明:**
  - `r_t`: 時間 t 的瞬時利率。
  - `k` (kappa_cir): 均值回歸速度。
  - `θ` (theta_cir): 長期平均利率。
  - `σ` (sigma_cir): 波動率。
  - `dW_t`: 維納過程。

---

### 3. 幾何布朗運動 (Geometric Brownian Motion, GBM)

此模型常用於模擬股價，在此系統中作為一個簡化的**綜合利率 (dr)** 模型。其離散化形式為 `r_t = r_{t-1} * exp((μ - 0.5σ²)Δt + σ√Δt W_t)`。

- **公式 (SDE):**
  ```
  dr_t = μr_t dt + σr_t dW_t
  ```

- **變數說明:**
  - `r_t`: 時間 t 的瞬時利率。
  - `μ` (mu_r): 長期漂移趨勢或預期回報率。
  - `σ` (sigma_r): 年化波動率。
  - `dW_t`: 維納過程。

---

### 4. 有風險利率 (Risky Rate) 模型

此模型在一個已模擬的**債券風險利率 (drf)** 基礎上，加上一個隨機變動的**信用利差 (spread)**，形成**有風險利率 (drs)**。

- **公式:**
  ```
  drs_t = drf_t + spread_t
  ```
  其中，信用利差的變動 `d(spread_t)` 遵循以下隨機過程：
  ```
  d(spread_t) = σ_s dW_s
  ```
  而利差的隨機衝擊 `dW_s` 與債券風險利率的隨機衝擊 `dW_f` 相關：
  ```
  dW_s = ρ * dW_f + √(1 - ρ²) * dZ_t
  ```

- **變數說明:**
  - `drs_t`: 有風險利率。
  - `drf_t`: 債券風險利率 (來自 Vasicek 模型)。
  - `spread_t`: 信用利差。
  - `σ_s` (sigma_spread): 信用利差的波動率。
  - `ρ` (correlation): `drf` 與 `spread` 變動之間的相關係數。
  - `dW_s`, `dW_f`: 分別為利差和債券風險利率的維納過程。
  - `dZ_t`: 一個與 `dW_f` 獨立的標準維納過程。
